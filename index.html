// index.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Birthday Quest for Gunjan</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <button id="startButton">Bring it on</button>
  <script src="script.js"></script>
</body>
</html>

// style.css
body, html {
  margin: 0;
  overflow: hidden;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #f5f5dc;
}

#gameCanvas {
  width: 100vw;
  height: 100vh;
  background-color: #a0d8ef;
  border: 2px solid black;
}

#startButton {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  padding: 12px 24px;
  font-size: 20px;
  background-color: #4CAF50;
  color: white;
  border: none;
  cursor: pointer;
  border-radius: 8px;
}

// script.js
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

if (!ctx) {
  console.error('Canvas context not found. Please check the canvas element.');
}

const gunjanImage = new Image();
gunjanImage.src = 'gunjan.png';

gunjanImage.onload = () => console.log('Gunjan image loaded successfully.');
gunjanImage.onerror = () => console.error('Failed to load Gunjan image. Check the file path or image format.');

const snacks = [];
const snackImage = new Image();
snackImage.src = 'https://cdn-icons-png.flaticon.com/512/1046/1046784.png';
snackImage.onload = () => console.log('Snack image loaded. Game is ready.');
snackImage.onerror = () => console.error('Failed to load snack image. Using fallback.');

function drawPlayer() {
  console.log('Attempting to draw player.');
  if (!gunjanImage.complete || gunjanImage.naturalWidth === 0) {
    console.error('Image not loaded, skipping draw.');
    return;
  }
  console.log('Drawing player on canvas.');
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.drawImage(gunjanImage, canvas.width / 2 - 50, canvas.height / 2 - 50, 100, 100);

  snacks.forEach(snack => {
    if (snackImage.complete && snackImage.naturalWidth > 0) {
      console.log('Drawing snack at:', snack.x, snack.y);
      ctx.drawImage(snackImage, snack.x, snack.y, 50, 50);
    } else {
      console.log('Snack image not available. Drawing fallback circle.');
      ctx.fillStyle = 'orange';
      ctx.beginPath();
      ctx.arc(snack.x, snack.y, 25, 0, Math.PI * 2);
      ctx.fill();
    }
  });
}

function spawnSnack() {
  snacks.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height });
}

function update() {
  console.log('Update function running...');
  drawPlayer();
  requestAnimationFrame(update);
}

document.getElementById('startButton').onclick = () => {
  console.log('Button clicked. Starting the game.');
  for (let i = 0; i < 5; i++) spawnSnack();
  update();
};
